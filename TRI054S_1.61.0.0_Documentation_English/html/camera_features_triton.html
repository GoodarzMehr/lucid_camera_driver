

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Camera Features &mdash; TRI054S 1.59.0.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="TRI054S 1.59.0.0 documentation" href="index.html"/>
        <link rel="next" title="Device Nodes" href="CategoryDoc.html"/>
        <link rel="prev" title="Camera Specifications" href="camera_specification_triton.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="ExternalDoc.html" class="icon icon-home"> TRI054S
          

          
            
            <img src="../lucid-white-logo.png" class="logo" />
          
          </a>

          
            
            
              <div class="version">
                1.59.0.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="welcome_page.html">Welcome!</a></li>
<li class="toctree-l1"><a class="reference internal" href="safety_and_precautions.html">Safety and Precautions</a></li>
<li class="toctree-l1"><a class="reference internal" href="contact_us.html">Contact Us</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_camera_hardware_triton.html">Installing the Camera Hardware</a></li>
<li class="toctree-l1"><a class="reference internal" href="configure_host_camera.html">Configuring the Camera and Host System</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_camera.html">Using the Camera</a></li>
<li class="toctree-l1"><a class="reference internal" href="camera_specification_triton.html">Camera Specifications</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Camera Features</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#image-processing-controls">Image Processing Controls</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#defect-pixel-correction">Defect Pixel Correction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gain">Gain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#analog-gain">Analog Gain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#digital-gain">Digital Gain</a></li>
<li class="toctree-l4"><a class="reference internal" href="#conversion-gain-switching">Conversion Gain Switching</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#color-processing">Color Processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#white-balance">White Balance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#look-up-table-lut">Look-Up Table (LUT)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gamma">Gamma</a></li>
<li class="toctree-l3"><a class="reference internal" href="#color-space-conversion-and-correction">Color Space Conversion and Correction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#image-format-controls">Image Format Controls</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#region-of-interest-roi">Region of Interest (ROI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#binning">Binning</a></li>
<li class="toctree-l3"><a class="reference internal" href="#decimation">Decimation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#horizontal-and-vertical-flip">Horizontal and Vertical Flip</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-pattern">Test Pattern</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#digital-io">Digital IO</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuring-an-input-line">Configuring an Input Line</a></li>
<li class="toctree-l3"><a class="reference internal" href="#triggeroverlap">TriggerOverlap</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuring-an-output-line">Configuring an Output Line</a></li>
<li class="toctree-l3"><a class="reference internal" href="#turning-on-gpio-voltage-output">Turning on GPIO Voltage Output</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#chunk-data">Chunk Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#extracting-the-image-crc-checksum-with-chunkcrc">Extracting the Image CRC checksum with ChunkCRC</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#transfer-control">Transfer Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#automatic-transfer-control">Automatic Transfer Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usercontrolled-transfer-control">UserControlled Transfer Control</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#event-control">Event Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#exposure-start">Exposure Start</a></li>
<li class="toctree-l3"><a class="reference internal" href="#exposure-end">Exposure End</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test">Test</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#firmware-update">Firmware Update</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#updating-your-camera-firmware">Updating your Camera Firmware</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="CategoryDoc.html">Device Nodes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="ExternalDoc.html">TRI054S</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="ExternalDoc.html">Docs</a> &raquo;</li>
        
      <li>Camera Features</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="camera-features">
<h1>Camera Features<a class="headerlink" href="#camera-features" title="Permalink to this headline">¶</a></h1>
<div class="section" id="image-processing-controls">
<h2>Image Processing Controls<a class="headerlink" href="#image-processing-controls" title="Permalink to this headline">¶</a></h2>
<p>The TRI054S camera is equipped with the following image processing control flow.</p>
<a class="reference internal image-reference" href="_images/image_processing_control_flow.png"><img alt="_images/image_processing_control_flow.png" class="align-center" src="_images/image_processing_control_flow.png" style="width: 800px;" /></a>
<p>The details of each of the image processing controls are described below.</p>
<div class="section" id="defect-pixel-correction">
<h3>Defect Pixel Correction<a class="headerlink" href="#defect-pixel-correction" title="Permalink to this headline">¶</a></h3>
<p>The TRI054S supports a list of pixel coordinates to be corrected via
firmware. For the list of pixel coordinates, their actual pixel values are
replaced by interpolation of their neighboring pixel values. The camera has a
preloaded pixel correction list and these pixels are loaded during the camera
manufacturing process. It is natural that sensors come with defective pixels
and they are inevitable in the semi-conductor manufacturing process. As the
camera operates longer in heat or is exposed to radiation, more defective
pixels may appear. Users can update the pixel correction list any time.</p>
<p><strong>Steps to add a new pixel to the correction list</strong></p>
<ol class="arabic simple">
<li>Set OffsetX and OffsetY to zero. Set Width and Height to the maximum allowed value.</li>
<li>Set Gain to zero and note the coordinates of any bright pixels in the image. Please ensure the camera is not exposed to light by covering it with a lens cap and placed in a dark box.</li>
<li>Fire the DefectCorrectionGetNewDefect command.</li>
<li>Enter the X-coordinate noted in step 2 into DefectCorrectionPositionX.</li>
<li>Enter the Y-coordinate noted in step 2 into DefectCorrectionPositionY.</li>
<li>Fire the DefectCorrectionApply command.</li>
<li>Repeat steps 3-6 as needed and fire the DefectCorrectionSave when done.</li>
</ol>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2"><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td rowspan="2">Pixel correction is still applied if the image geometry changes (e.g. applying ReverseX, ReverseY, a region of interest, or binning).</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<p>The following pseudocode demonstrates adding a defective pixel to the
correction list:</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map   </span>
<span class="c1">// Set maximum width and height </span>
<span class="n">OffsetX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">OffsetY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">Width</span> <span class="o">=</span> <span class="n">Max</span> <span class="n">Width</span><span class="p">;</span>
<span class="n">Height</span> <span class="o">=</span> <span class="n">Max</span> <span class="n">Height</span><span class="p">;</span>
<span class="c1">// Set constant ExposureTime and Gain </span>

<span class="n">DefectCorrectionGetNewDefect</span><span class="p">();</span>
<span class="n">DefectCorrectionPositionX</span> <span class="o">=</span> <span class="mi">25</span><span class="p">;</span>  <span class="c1">// The X-coordinate of the blemish pixel </span>
<span class="n">DefectCorrectionPositionY</span> <span class="o">=</span> <span class="mi">150</span><span class="p">;</span> <span class="c1">// The Y-coordinate of the blemish pixel </span>
<span class="n">DefectCorrectionApply</span><span class="p">();</span>

<span class="c1">// Repeat the above four steps as needed. When complete:</span>
<span class="n">DefectCorrectionSave</span><span class="p">();</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="gain">
<h3>Gain<a class="headerlink" href="#gain" title="Permalink to this headline">¶</a></h3>
<p>Gain refers to a multiplication factor applied to a signal to increase the
strength of that signal. On Lucid cameras, gain can be either
manually adjusted or automatically controlled.</p>
<p>Some cameras feature gain that is purely digital while others allow for analog
gain control up to a certain value, beyond which the gain becomes digital.
Depending on the camera family and sensor model, the specific gain control
can vary.</p>
<div class="section" id="analog-gain">
<h4>Analog Gain<a class="headerlink" href="#analog-gain" title="Permalink to this headline">¶</a></h4>
<p>Analog Gain refers to amplification of the sensor signal prior to A/D conversion.</p>
</div>
<div class="section" id="digital-gain">
<h4>Digital Gain<a class="headerlink" href="#digital-gain" title="Permalink to this headline">¶</a></h4>
<p>Digital Gain refers to amplification of the signal after digitization.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="26%" />
<col width="26%" />
<col width="26%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Model</th>
<th class="head">Conversion Gain</th>
<th class="head">Analog</th>
<th class="head">Digital</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>TRI004S</td>
<td>NA</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-odd"><td>TRI016S</td>
<td>NA</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-even"><td>TRI023S</td>
<td>NA</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-odd"><td>TRI028S</td>
<td>HCG 7.2dB</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-even"><td>TRI032S</td>
<td>NA</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-odd"><td>TRI050S</td>
<td>NA</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-even"><td>TRI050S-(P/Q)</td>
<td>NA</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-odd"><td>TRI064S</td>
<td>NA</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-even"><td>TRI071S</td>
<td>HCG 7.2dB</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-odd"><td>TRI089S</td>
<td>NA</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-even"><td>TRI120S</td>
<td>NA</td>
<td>0-24dB</td>
<td>24-48dB</td>
</tr>
<tr class="row-odd"><td>TRI122S</td>
<td>NA</td>
<td>0-27dB</td>
<td>NA</td>
</tr>
<tr class="row-even"><td>TRI200S</td>
<td>NA</td>
<td>0-27dB</td>
<td>NA</td>
</tr>
<tr class="row-odd"><td>TRI02KA</td>
<td>HCG 12dB</td>
<td>NA</td>
<td>0-24dB</td>
</tr>
</tbody>
</table>
<p>The following pseudocode demonstrates setting Gain to 12 dB:</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>
<span class="n">GainAuto</span> <span class="o">=</span> <span class="n">Off</span><span class="p">;</span>
<span class="n">Gain</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="conversion-gain-switching">
<h4>Conversion Gain Switching<a class="headerlink" href="#conversion-gain-switching" title="Permalink to this headline">¶</a></h4>
<p>Sony&#8217;s third generation Pregius sensor line offers a new feature called Conversion Gain Switching. This feature is implemented in IMX428 (TRI071S) and IMX429 (TRI028S) offered in the Triton family. The conversion gain switching feature allow users to select between High Conversion Gain (HCG) for maximum sensitivity and minimum read noise in low light, and Low Conversion Gain (LCG) for greatly increased saturation capacity and higher dynamic range under bright light.</p>
<a class="reference internal image-reference" href="_images/conversion_gain_switching.png"><img alt="_images/conversion_gain_switching.png" src="_images/conversion_gain_switching.png" style="width: 800px;" /></a>
<p>The 2K Line Scan Awaiba sensor also supports conversion gain on sensor before the ADC stage.</p>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2"><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td rowspan="2">Conversion gain (HCG or LCG) only allows the pixel to be applied once, you will not get the same pixel with both HCG and LCG in two images.</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="color-processing">
<h3>Color Processing<a class="headerlink" href="#color-processing" title="Permalink to this headline">¶</a></h3>
<p>The TRI054S camera is equipped with a debayering core within the image
processing pipeline. The color processing core enables the camera to output a
color processed image format in addition to the unprocessed Bayer-tiled image.
Currently the camera supports the RGB8 pixel format which outputs 8-bits of
data per color channel for a total of 24-bits per pixel. Due to the number of
bits per pixel, the total image size for RGB8 would be 3 times larger when
compared to an 8-bit image. This increase in image data size per frame would
result in a reduction of average frame rate for the camera.</p>
<p>The following pseudocode demonstrates configuring the camera to RGB8 pixel
format:</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>
<span class="n">PixelFormat</span> <span class="o">=</span> <span class="n">PixelFormat_RGB8</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="white-balance">
<h3>White Balance<a class="headerlink" href="#white-balance" title="Permalink to this headline">¶</a></h3>
<p>The white balance module aims to change the balance between the Red, Green and
Blue channels such that a white object appears white in the acquired images.
Lucid Vision Labs cameras allow for manual white balance adjustment by the
user, or automatic white balance adjustment based on statistics of previously
acquired frames. Different external illuminations and different sensors may
render acquired images with color shift. The White Balance module allows the
user to correct for the color shift by adjusting gain value of each color channel.</p>
<p>Lucid Vision Labs offers two types of white balance algorithm as described below.
Both methods below allow for user controlled anchor points or reference points,
from which multipliers are computed for each channel. The different anchor
points are summarized below.</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Anchors</th>
<th class="head">Information</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Min</td>
<td>The lowest luminance channel is used as reference while other channels are adjusted to match it. There is no chance of overflowing the pixels, however the image is darkened.</td>
</tr>
<tr class="row-odd"><td>Max</td>
<td>The highest luminance channel is used as reference while other channels are adjusted to match it. There is a chance of overflowing the pixels.</td>
</tr>
<tr class="row-even"><td>Mean</td>
<td>The mean value of all channels is used as reference while all channels are adjusted to match the mean. There is a smaller chance of overflowing.</td>
</tr>
<tr class="row-odd"><td>Green</td>
<td>Green channel is used as the reference while the Red and Blue are adjusted.</td>
</tr>
</tbody>
</table>
<p><strong>Grey World</strong></p>
<p>A grey world assumes that the average of all colors in an image is a neutral grey.</p>
<p><strong>White Patch</strong></p>
<p>White patch has the same idea as Grey World, but only considering a section of the image (i.e. the section being the white
patches). A simple way to determine such section(s) of the image is to indicate a pixel as white when R+G+B is greater than the
threshold pixel value.  Determining the threshold can be done using a 90% percentile of previous image. There is also a need for
an additional threshold to exclude saturated pixels for better white balance adjustment.</p>
</div>
<div class="section" id="look-up-table-lut">
<h3>Look-Up Table (LUT)<a class="headerlink" href="#look-up-table-lut" title="Permalink to this headline">¶</a></h3>
<p>Look-Up Table also known as LUT is used for mapping 12-bit user-specified pixel values to replace 12-bit raw sensor pixel values. Users input values for the even indices including the last index 4095 while averaging is used to calculate rest of the odd indices. So there are in total 2049 effective input entries; 2048 even (e.g., 0, 2, 4, ..., 4092, 4094) + 1 odd (4095). Index value 0 correspond to black color while the index value 4095 correspond to white color.</p>
<p>To build a LUT, users input index values (e.g., 0, 2, 4, ..., 4092, 4094, 4095) that need to be replaced in the LUTIndex field and the corresponding new value in the LUTValue field. For the odd index values in the gap (e.g., 1,3,5 …,4089, 4091, 4093), their mapped value is calculated by taking the average of their neighbor mapped values (e.g., If the input mappings are LUTIndex = 1090 -&gt; LUTValue = 10 and LUTIndex = 1092 -&gt; LUTValue = 20, then the mapped value of LUTIndex  = 1091 will be LUTValue = 15)</p>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td>To reset Look-Up Table, please execute <strong>LUTReset</strong> command</td>
</tr>
</tbody>
</table>
<p>The following pseudocode demonstrates replacing black pixel values with white pixel values:</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>

<span class="n">LUTEnable</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>   
<span class="n">LUTIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">//Pixel value to be replaced, in this case black  </span>
<span class="n">LUTValue</span> <span class="o">=</span> <span class="mi">4095</span><span class="p">;</span> <span class="c1">//New pixel value, in this case white     </span>
<span class="n">LUTSave</span><span class="p">();</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="gamma">
<h3>Gamma<a class="headerlink" href="#gamma" title="Permalink to this headline">¶</a></h3>
<p>The gamma control allows the optimization of brightness for display.
LUCID implements Gamma using GenICam standard, that is</p>
<img alt="_images/gamma.png" src="_images/gamma.png" />
<p>where,</p>
<ul class="simple">
<li>X = New pixel value; 0 &lt;= X &lt;=1</li>
<li>Y = Old pixel value; 0 &lt;= Y &lt;=1</li>
<li>Gamma = Pixel intensity: 0.2 &lt;= Gamma &lt;= 2</li>
</ul>
<p>Y in the Gamma formula is scaled down to [0-1] from original pixel range which results in
a pixel range of [0-1] for X. As an example, for 12-bit pixel formats, this would mean scaling
down pixel range from [0-4095] to [0-1] and for 16-bit pixel formats, this would mean
scaling down pixel range from [0-65535] to [0-1].</p>
<p>The camera applies gamma correction values to the intensity of each pixel. In general,
gamma values can be summarized as follows:</p>
<ul class="simple">
<li>Gamma = 1: brightness is unchanged.</li>
<li>1 &lt;= Gamma &lt;= 2: brightness decreases.</li>
<li>0.2 &lt;= Gamma &lt;= 1: brightness increases.</li>
</ul>
</div>
<div class="section" id="color-space-conversion-and-correction">
<h3>Color Space Conversion and Correction<a class="headerlink" href="#color-space-conversion-and-correction" title="Permalink to this headline">¶</a></h3>
<p>The Color Space Conversion control allows the user to convert from RGB color
space to another color space such as YUV.
The conversion is done in a linear manner as shown in the following equation.</p>
<img alt="_images/color_space_conversion.png" src="_images/color_space_conversion.png" />
<p>The color correction function allows the user to choose between a few
preset values or user-configurable matrix values. The color correction is
done by allowing the multiplication of a 3x3 matrix to the 3x1 matrix containing
R, G and B pixel values to achieve a more desirable R&#8217;, G&#8217; and B&#8217; values.
The specific mathematical procedure can be represented by the following.</p>
<img alt="_images/ccm.png" src="_images/ccm.png" />
<ul class="simple">
<li>ColorTransformationEnable is a node that indicates whether the conversion matrix of the color space conversion module is used or bypassed.</li>
<li>When the pixel format is YUV or YCbCr, ColorTransformationSelector is displayed as RGBtoYUV. When the pixel format is Mono, ColorTransformationSelector is displayed as RGBtoY.</li>
<li>ColorTransformationValueSelector chooses which coefficient in the conversion matrix and the coefficient value is shown in ColorTransformationValue. In Mono, YUV or YCbCr pixel formats, ColorTransformationValue is read only.</li>
</ul>
</div>
</div>
<div class="section" id="image-format-controls">
<h2>Image Format Controls<a class="headerlink" href="#image-format-controls" title="Permalink to this headline">¶</a></h2>
<p>The TRI054S camera is equipped with the following image format control capabilities.</p>
<div class="section" id="region-of-interest-roi">
<h3>Region of Interest (ROI)<a class="headerlink" href="#region-of-interest-roi" title="Permalink to this headline">¶</a></h3>
<p>The region of interest feature allows you to specify which region of the
sensor is used for image acquisition. This feature allows a custom width and
height for image size and a custom X and Y offset for image position. The width
and height must be a multiple of the minimum width and height values allowed by
the camera.</p>
<p>The following pseudocode demonstrates configuring the camera to use a region of
interest of 200x200 at offset (250,150):</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>
<span class="n">OffsetX</span> <span class="o">=</span> <span class="mi">250</span><span class="p">;</span>
<span class="n">OffsetY</span> <span class="o">=</span> <span class="mi">150</span><span class="p">;</span>
<span class="n">Width</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
<span class="n">Height</span> <span class="o">=</span> <span class="mi">200</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2"><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td rowspan="2">If the camera is acquiring images, AcquisitionStop must be called before changing region of interest settings.</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</div>
<div class="section" id="binning">
<h3>Binning<a class="headerlink" href="#binning" title="Permalink to this headline">¶</a></h3>
<p>The TRI054S camera supports binning in which columns and/or rows of pixels are combined to achieve
a reduced overall image size without changing the image&#8217;s field of view. This feature may result in an increase
of camera&#8217;s frame rate.</p>
<p>The binning factor indicates how many pixels in the horizontal and vertical axis are combined. For example,
when applying 2x2 binning, which is 2 pixels in the horizontal axis and 2 pixels in the vertical axis,
4 pixels combine to form 1 pixel. The resultant pixel values can be summed or averaged.</p>
<p>When binning is used, the settings of the image width and height will be affected. For example,
if you are using a camera with sensor resolution of 2448 x 2048 and apply 2x2 binning, the effective
resolution of the resultant image is reduced to 1224 x 1024. This can be verified by checking
the Width and Height nodes.</p>
<p>The following pseudocode demonstrates configuring binning on the camera:</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>

<span class="n">BinningSelector</span> <span class="o">=</span> <span class="n">Digital</span><span class="p">;</span>    <span class="c1">// Digital binning is performed by FPGA, some cameras will support BinningSelector = Sensor </span>
<span class="n">BinningHorizontalMode</span> <span class="o">=</span> <span class="n">Sum</span><span class="p">;</span>  <span class="c1">// Binned horizontal pixels will be summed (additive binning) </span>
<span class="n">BinningVerticalMode</span> <span class="o">=</span> <span class="n">Sum</span><span class="p">;</span>    <span class="c1">// Binned vertical pixels will be summed  (additive binning) </span>

<span class="n">BinningHorizontal</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// Set Horizontal Binning by a factor of 2 </span>
<span class="n">BinningVertical</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>   <span class="c1">// Set Vertical Binning by a factor of 2 </span>

<span class="c1">// Resulting image is 1/4 of original size</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2"><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td rowspan="2">When horizontal binning is used, horizontal decimation (if supported) is not available. When vertical binning is used, vertical decimation (if supported) is not available.</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2"><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td rowspan="2">If the camera is acquiring images, AcquisitionStop must be called before adjusting binning settings.</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</div>
<div class="section" id="decimation">
<h3>Decimation<a class="headerlink" href="#decimation" title="Permalink to this headline">¶</a></h3>
<p>The TRI054S camera supports decimation in which columns and/or rows of pixel are skipped to achieve
reduced overall image size without changing the image&#8217;s field of view. This feature is also known as &#8220;subsampling&#8221;
due to the smaller sample size of pixels the camera transmits. This feature may result in an increase of camera&#8217;s
frame rate.</p>
<p>When decimation is used, the settings of the image width and height will be affected. For example, if you are using
a camera with sensor resolution of 2448 x 2048. When horizontal and vertical decimation are both set to 2, the effective
resolution of the resultant image is reduced to 1224 x 1024. This can be verified by checking the Width and Height nodes.</p>
<p>The following pseudocode demonstrates configuring decimation on the camera:</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>

<span class="n">DecimationHorizontal</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">//Set Horizontal Decimation by factor of 2</span>
<span class="n">DecimationVertical</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="c1">// Set Vertical Decimation by factor of 2</span>

<span class="c1">// Resulting image is 1/4 of original size</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2"><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td rowspan="2">When horizontal decimation is used, horizontal binning (if supported) is not available. When vertical decimation is used, vertical binning (if supported) is not available.</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2"><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td rowspan="2">If the camera is acquiring images, AcquisitionStop must be called before adjusting decimation settings.</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</div>
<div class="section" id="horizontal-and-vertical-flip">
<h3>Horizontal and Vertical Flip<a class="headerlink" href="#horizontal-and-vertical-flip" title="Permalink to this headline">¶</a></h3>
<p>This feature allows the camera to flip the image horizontally and vertically.
The flip action occurs on the camera before transmitting the image to the host.</p>
<p>The following pseudocode demonstrates configuring the camera to flip both
horizontal and vertical axes:</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>
<span class="n">ReverseX</span> <span class="o">=</span> <span class="n">True</span><span class="p">;</span>
<span class="n">ReverseY</span> <span class="o">=</span> <span class="n">True</span><span class="p">;</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2"><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td rowspan="2">If the camera is acquiring images, AcquisitionStop must be called before changing horizontal or vertical flip.</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</div>
<div class="section" id="test-pattern">
<h3>Test Pattern<a class="headerlink" href="#test-pattern" title="Permalink to this headline">¶</a></h3>
<p>The camera is capable of outputting a few FPGA-generated patterns when test pattern is enabled.</p>
<a class="reference internal image-reference" href="_images/test_pattern_0.png"><img alt="_images/test_pattern_0.png" src="_images/test_pattern_0.png" style="width: 200px;" /></a>
</div>
</div>
<div class="section" id="digital-io">
<h2>Digital IO<a class="headerlink" href="#digital-io" title="Permalink to this headline">¶</a></h2>
<p>The TRI054S&#8217;s Digital IO controls input and output lines that can be utilized
with external circuitry for synchronization with other devices. An example use
of an input line is to allow the camera to take an image upon receipt of an internal
software signal or an external pulse (rising or falling edge). An example use
of an output line is to fire a pulse when the camera starts integration for the
duration of the current ExposureTime value.</p>
<p>The Digital IO lines correspond to the TRI054S&#8217;s GPIO pins. Please consult the
GPIO Cable section for more information on the required cable for the GPIO connector
and the GPIO Characteristics section for a GPIO pinout diagram.</p>
<div class="section" id="configuring-an-input-line">
<h3>Configuring an Input Line<a class="headerlink" href="#configuring-an-input-line" title="Permalink to this headline">¶</a></h3>
<p>When a Digital IO line is set to Input, the line can accept external pulses. To
trigger the camera upon receipt of an external pulse, the camera must also have
trigger mode enabled.</p>
<p>The following pseudocode demonstrates enabling trigger mode and setting Line0
as the trigger input source.</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>

<span class="c1">// Choose Line0 and set it to Input </span>
<span class="n">LineSelector</span> <span class="o">=</span> <span class="n">Line0</span><span class="p">;</span>
<span class="n">LineMode</span> <span class="o">=</span> <span class="n">Input</span><span class="p">;</span>

<span class="n">TriggerMode</span> <span class="o">=</span> <span class="n">On</span><span class="p">;</span>
<span class="n">TriggerSelector</span> <span class="o">=</span> <span class="n">FrameStart</span><span class="p">;</span>           <span class="c1">// Trigger signal starts a frame capture </span>
<span class="n">TriggerSource</span> <span class="o">=</span> <span class="n">Line0</span><span class="p">;</span>                  <span class="c1">// External signal to be expected on Line0 </span>
<span class="n">TriggerActivation</span> <span class="o">=</span> <span class="n">FallingEdge</span><span class="p">;</span>        <span class="c1">// Camera will trigger on the falling edge of the input signal </span>

<span class="n">AcquisitionStart</span><span class="p">();</span>

<span class="c1">// Acquire images by sending pulses to Line0</span>
</pre></div>
</td></tr></table></div>
<p>It is also possible to set software as the input source. This will enable the camera
to trigger upon a software signal. Note this mechanism may not be as accurate
as using an external trigger source.</p>
<p>The following pseudocode demonstrates enabling trigger mode and setting a software
trigger source.</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>

<span class="n">TriggerMode</span> <span class="o">=</span> <span class="n">On</span><span class="p">;</span>
<span class="n">TriggerSelector</span> <span class="o">=</span> <span class="n">FrameStart</span><span class="p">;</span>           <span class="c1">// Trigger signal starts a frame capture </span>
<span class="n">TriggerSource</span> <span class="o">=</span> <span class="n">Software</span><span class="p">;</span>               <span class="c1">// Software signal will trigger camera </span>

<span class="n">AcquisitionStart</span><span class="p">();</span>

<span class="n">TriggerSoftware</span><span class="p">();</span>                      <span class="c1">// Execute TriggerSoftware to signal the camera to acquire an image</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/help_icon.png"><img alt="help" src="_images/help_icon.png" style="width: 70px;" /></a></td>
<td>Some Digital IO lines may be Input only (e.x. an opto-isolated input).
Consult the GPIO Characteristics section for a GPIO pinout diagram.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="triggeroverlap">
<h3>TriggerOverlap<a class="headerlink" href="#triggeroverlap" title="Permalink to this headline">¶</a></h3>
<p>By default, the TRI054S will reject input pulses until the last triggered
image has completed the readout step on the sensor. This may limit the maximum
achievable trigger frequency on some cameras when compared to maximum non-triggered
FrameRate.</p>
<p>To address this situation, the TRI054S also supports TriggerOverlap functionality.
When TriggerOverlap is enabled, this allows the camera to accept an input
pulse before the readout step is complete. This allows the camera to be triggered
at frequencies closer to the maximum non-triggered FrameRate.</p>
</div>
<div class="section" id="configuring-an-output-line">
<h3>Configuring an Output Line<a class="headerlink" href="#configuring-an-output-line" title="Permalink to this headline">¶</a></h3>
<p>When a Digital IO line is set to Output, the line can fire pulses.</p>
<p>The following pseudocode demonstrates setting Line1 as the output source. This sets
up the camera to fire a pulse when the camera is acquiring an image.</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>

<span class="c1">// Choose Line1 and set it to Output </span>
<span class="n">LineSelector</span> <span class="o">=</span> <span class="n">Line1</span><span class="p">;</span>
<span class="n">LineMode</span> <span class="o">=</span> <span class="n">Output</span><span class="p">;</span>
<span class="n">LineSource</span> <span class="o">=</span> <span class="n">ExposureActive</span><span class="p">;</span>            <span class="c1">// The output pulse will match the duration of ExposureTime</span>

<span class="n">AcquisitionStart</span><span class="p">();</span>

<span class="c1">// Acquire images and process signal from Line1</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="91%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/help_icon.png"><img alt="help" src="_images/help_icon.png" style="width: 70px;" /></a></td>
<td>Opto-isolated outputs will require external circuitry to be properly signaled.
Some Digital IO lines may be Output only  (e.x. an opto-isolated output).
Consult the GPIO Characteristics section for a GPIO pinout diagram.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="turning-on-gpio-voltage-output">
<h3>Turning on GPIO Voltage Output<a class="headerlink" href="#turning-on-gpio-voltage-output" title="Permalink to this headline">¶</a></h3>
<p>The TRI054S is capable of supplying external circuits with power through the V<sub>DD</sub> line.
By default this line is turned off.
The following pseudocode demonstrates enabling the GPIO V<sub>DD</sub> line to output voltage.</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>

<span class="c1">// Choose Line4 and set it to output external voltage </span>
<span class="n">LineSelector</span> <span class="o">=</span> <span class="n">Line4</span><span class="p">;</span>
<span class="n">VoltageExternalEnable</span> <span class="o">=</span> <span class="n">True</span><span class="p">;</span>

<span class="c1">// Continue with the rest of the program...</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/help_icon.png"><img alt="help" src="_images/help_icon.png" style="width: 70px;" /></a></td>
<td>Consult the GPIO Characteristics section for a GPIO pinout diagram.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="chunk-data">
<h2>Chunk Data<a class="headerlink" href="#chunk-data" title="Permalink to this headline">¶</a></h2>
<p>Chunk data is additional tagged data that can be used to identify individual
images. The chunk data is appended after the image data.</p>
<div class="section" id="extracting-the-image-crc-checksum-with-chunkcrc">
<h3>Extracting the Image CRC checksum with ChunkCRC<a class="headerlink" href="#extracting-the-image-crc-checksum-with-chunkcrc" title="Permalink to this headline">¶</a></h3>
<p>When the chunk data property named CRC is enabled, the camera tags a
cyclic-redundancy check (CRC) checksum that is calculated against the image
payload.</p>
<p>The following pseudocode demonstrates enabling the CRC property in chunk data
and extracting the ChunkCRC chunk from acquired images:</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>
<span class="n">ChunkModeActive</span> <span class="o">=</span> <span class="n">True</span><span class="p">;</span>
<span class="n">ChunkSelector</span>   <span class="o">=</span> <span class="n">CRC</span><span class="p">;</span>
<span class="n">ChunkEnable</span>     <span class="o">=</span> <span class="n">True</span><span class="p">;</span>

<span class="n">AcquisitionStart</span><span class="p">();</span>

<span class="c1">// Acquire image into buffer</span>
<span class="c1">// Read chunk data from received buffer </span>
<span class="n">bufferCRC</span>   <span class="o">=</span> <span class="n">ChunkCRC</span><span class="p">;</span>        <span class="c1">// CRC checksum for image payload</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2"><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td rowspan="2">If the camera is acquiring images, AcquisitionStop must be called before enabling or disabling chunk data.</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="transfer-control">
<h2>Transfer Control<a class="headerlink" href="#transfer-control" title="Permalink to this headline">¶</a></h2>
<p>Transfer Control allows the device to accumulate images on the on-camera buffer
in a queue. The data stored in the queue, referred to as blocks, can be transmitted
to the host application at a later time. The host application will be able to
request the device transmit one or more block. By default, this control is
disabled on the TRI054S and acquired images are automatically transmitted.</p>
<div class="section" id="automatic-transfer-control">
<h3>Automatic Transfer Control<a class="headerlink" href="#automatic-transfer-control" title="Permalink to this headline">¶</a></h3>
<p>When using Automatic Transfer Control mode, the transfer of blocks to the host are
controlled the device&#8217;s acquisition controls.</p>
<p>In Automatic Transfer Control mode, the TransferOperationMode is read only
and set to Continuous. Using Continuous TransferOperationMode is similar to when
Transfer Control is not enabled, except the host application can stop data
transmission without stopping image acquisition on the device.</p>
<p>The following pseudocode demonstrates enabling Automatic Transfer Control mode
on the camera.</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>

<span class="c1">// Set desired Pixel Format, Width, Height</span>

<span class="c1">// Optional: Read TransferQueueMaxBlockCount to determine the number of blocks </span>
<span class="c1">// that can be stored in the on-camera buffer with the current device settings </span>

<span class="n">TransferControlMode</span> <span class="o">=</span> <span class="n">Automatic</span><span class="p">;</span>
<span class="n">TransferQueueMode</span> <span class="o">=</span> <span class="n">FirstInFirstOut</span><span class="p">;</span>

<span class="n">AcquisitionStart</span><span class="p">();</span>             <span class="c1">// When in Automatic Transfer Control Mode, the </span>
                                <span class="c1">// AcquisitionStart command automatically executes the TransferStart command </span>
                                
<span class="c1">// Acquire images</span>
<span class="c1">// Images will be accumulating into the on-camera buffer</span>
<span class="c1">// Blocks will be transmitted to the host system automatically until TransferPause or AcquisitionStop is executed</span>

<span class="c1">// Retrieve images on host system</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/help_icon.png"><img alt="help" src="_images/help_icon.png" style="width: 70px;" /></a></td>
<td><p class="first">In Automatic Transfer Control mode, the following commands are available:</p>
<ul class="last simple">
<li><strong>TransferPause</strong>  to pause transfer of blocks without executing TransferStop or AcquisitionStop.</li>
<li><strong>TransferResume</strong>  to resume transfer of blocks after TransferPause has been called.</li>
<li><strong>TransferAbort</strong>  to abort transfer of blocks.</li>
<li><strong>TransferStop</strong> to stop transfer of blocks.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/help_icon.png"><img alt="help" src="_images/help_icon.png" style="width: 70px;" /></a></td>
<td>When blocks are not transmitted from the on-camera buffer to the host
quickly enough and the amount of blocks to be stored in the buffer exceeds
TransferQueueMaxBlockCount, the new images will will be dropped. Set
TransferStatusSelector to <strong>QueueOverflow</strong> and read TransferStatus to
determine if a block is lost.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="usercontrolled-transfer-control">
<h3>UserControlled Transfer Control<a class="headerlink" href="#usercontrolled-transfer-control" title="Permalink to this headline">¶</a></h3>
<p>When using UserControlled Transfer Control mode, the transfer of blocks to the
host are controlled by the host application. Using MultiBlock TransferOperationMode
with UserControlled Transfer Control allows the host application to specify
when to transmit data from the device.</p>
<p>The following pseudocode demonstrates enabling UserControlled Transfer Control mode
with MultiBlock TransferOperationMode on the camera. It also demonstrates
transferring 2 blocks from the on-camera buffer for each transmission operation.</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera</span>
<span class="c1">// Get device node map </span>

<span class="c1">// Set desired PixelFormat, Width, Height</span>

<span class="c1">// Optional: Read TransferQueueMaxBlockCount to determine the number of blocks </span>
<span class="c1">// that can be stored in the on-camera buffer with the current device settings </span>

<span class="n">TransferControlMode</span> <span class="o">=</span> <span class="n">UserControlled</span><span class="p">;</span>
<span class="n">TransferQueueMode</span> <span class="o">=</span> <span class="n">FirstInFirstOut</span><span class="p">;</span>

<span class="n">TransferOperationMode</span> <span class="o">=</span> <span class="n">MultiBlock</span><span class="p">;</span>    <span class="c1">// Transmit the number of blocks in TransferBlockCount </span>
<span class="n">TransferBlockCount</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>                <span class="c1">// This should be less than or equal to TransferQueueMaxBlockCount </span>

<span class="n">AcquisitionStart</span><span class="p">();</span>             
                                
<span class="c1">// Acquire images</span>
<span class="c1">// Images will be accumulating into the on-camera buffer</span>

<span class="c1">// Read TransferQueueCurrentBlockCount </span>
<span class="n">If</span> <span class="p">(</span><span class="n">TransferQueueCurrentBlockCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// Transmit blocks to host system</span>
    <span class="n">TransferStart</span><span class="p">();</span>
    
    <span class="c1">// Retrieve block 1 on host system</span>
    <span class="c1">// Retrieve block 2 on host system</span>

    <span class="n">TransferStop</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="93%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/help_icon.png"><img alt="help" src="_images/help_icon.png" style="width: 70px;" /></a></td>
<td><p class="first">In UserControlled Transfer Control mode, the following commands are available:</p>
<ul class="last simple">
<li><strong>TransferPause</strong>  to pause transfer of blocks without executing TransferStop or AcquisitionStop.</li>
<li><strong>TransferResume</strong>  to resume transfer of blocks after TransferPause has been called.</li>
<li><strong>TransferAbort</strong>  to abort transfer of blocks.</li>
<li><strong>TransferStop</strong> to stop transfer of blocks.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/help_icon.png"><img alt="help" src="_images/help_icon.png" style="width: 70px;" /></a></td>
<td>When blocks are not transmitted from the on-camera buffer to the host
quickly enough and the amount of blocks to be stored in the buffer exceeds
TransferQueueMaxBlockCount, the new images will will be dropped. Set
TransferStatusSelector to <strong>QueueOverflow</strong> and read TransferStatus to
determine if a block is lost.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="86%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td>To turn off the Transfer Control mechanism, set the TransferControlMode to Basic.</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="89%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td rowspan="2"><a class="reference internal" href="_images/lightbulb_icon.png"><img alt="light_bulb" src="_images/lightbulb_icon.png" style="width: 50px;" /></a></td>
<td rowspan="2">If the camera is acquiring images, AcquisitionStop must be executed before changing Transfer Control properties.</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="event-control">
<h2>Event Control<a class="headerlink" href="#event-control" title="Permalink to this headline">¶</a></h2>
<p>Events are notifications generated by the camera to inform host application about internal updates.
Event Control is a mechanism that is used to synchronize the camera with host application
using these events.</p>
<p>EventSelector can be used to select the event for turning notifications on or off. By default,
EventNotification for all the events are set to Off except for Test event. This is because
EventNotification for Test event is always set to On and cannot be changed.</p>
<p>The following pseudocode demonstrates enabling Event Control on the camera.</p>
<div class="highlight-cpp"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1">// Connect to camera                                                    </span>
<span class="c1">// Get device node map </span>

<span class="n">InitializeEvents</span><span class="p">();</span> 

<span class="n">RegisterCallback</span><span class="p">();</span> 

<span class="n">GenerateEvent</span><span class="p">();</span> 

<span class="c1">// Wait on event       </span>

<span class="n">DeregisterCallback</span><span class="p">();</span>

<span class="n">DeinitializeEvents</span><span class="p">();</span>
</pre></div>
</td></tr></table></div>
<p>Events available on TRI054S are as follow:</p>
<div class="section" id="exposure-start">
<h3>Exposure Start<a class="headerlink" href="#exposure-start" title="Permalink to this headline">¶</a></h3>
<p>Exposure Start event occurs when camera starts exposing the sensor to capture a frame. Following data is sent by the camera at Exposure Start event:</p>
<ul class="simple">
<li><strong>EventExposureStart:</strong> Unique identifier of the Exposure Start type of Event.</li>
<li><strong>EventExposureStartTimestamp:</strong> Unique timestamp of the Exposure Start Event.</li>
<li><strong>EventExposureStartFrameID:</strong> Unique Frame ID related to Exposure Start Event.</li>
</ul>
</div>
<div class="section" id="exposure-end">
<h3>Exposure End<a class="headerlink" href="#exposure-end" title="Permalink to this headline">¶</a></h3>
<p>Exposure End event occurs when camera has finished exposing the sensor. Following data is sent by the camera at Exposure End event:</p>
<ul class="simple">
<li><strong>EventExposureEnd:</strong> Unique identifier of the Exposure End type of Event.</li>
<li><strong>EventExposureEndTimestamp:</strong> Unique timestamp of the Exposure End Event.</li>
<li><strong>EventExposureEndFrameID:</strong> Unique Frame ID related to Exposure End Event.</li>
</ul>
</div>
<div class="section" id="test">
<h3>Test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p>Test event occurs when TestEventGenerate node is executed. Test event is mainly used to confirm that camera is generating events. Following data is sent by the camera at Test event:</p>
<ul class="simple">
<li><strong>EventTest:</strong> Unique identifier of the Test type of Event.</li>
<li><strong>EventTestTimestamp:</strong> Unique timestamp of the Test Event.</li>
</ul>
</div>
</div>
<div class="section" id="firmware-update">
<h2>Firmware Update<a class="headerlink" href="#firmware-update" title="Permalink to this headline">¶</a></h2>
<p>Use the camera&#8217;s Firmware Update page to update your camera&#8217;s firmware.
Updating your camera&#8217;s firmware is easy with our firmware fwa file. The firmware
fwa files for each camera are located on our
<a class="reference external" href="https://thinklucid.com/downloads-hub/">Downloads page</a>.</p>
<p>Every Lucid camera comes with an on-board firmware update page that can be
directly accessed in a web browser. If you already know your camera&#8217;s IP
address you can access it at http://{your-camera-ip-address}/firmware-update.html.</p>
<a class="reference internal image-reference" href="_images/firmware_update_page.png"><img alt="_images/firmware_update_page.png" src="_images/firmware_update_page.png" style="width: 300px;" /></a>
<div class="section" id="updating-your-camera-firmware">
<h3>Updating your Camera Firmware<a class="headerlink" href="#updating-your-camera-firmware" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li>Navigate to your camera&#8217;s firmware update page in your web browser (http://{your-camera-ip-address}/firmware-update.html).</li>
<li>Click <strong>Choose a file</strong> on the Firmware Update page and select your fwa file.</li>
<li>Click <strong>Submit</strong> on the Firmware Update page. This will start the firmware update process.</li>
</ol>
<p>The Firmware Update page will show the progress of the update. During the
update, the camera will not be accessible for control or image capture. The
update may take a few minutes to complete. Please refrain from removing power
from the camera during the update.</p>
<p>When the firmware update is complete, the camera will reboot. Once the update
is finished, you can close the Firmware Update page and access the camera again.</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="CategoryDoc.html" class="btn btn-neutral float-right" title="Device Nodes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="camera_specification_triton.html" class="btn btn-neutral" title="Camera Specifications" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Lucid Vision Labs.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.59.0.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/examplecode.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>